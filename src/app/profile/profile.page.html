<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Mi Perfil</ion-title>
    <ion-buttons slot="start">
      <ion-button fill="clear" (click)="closePage()" class="back-button">
        ← Atrás
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="profile-content">

  <div class="profile-container" style="margin-top: 5%; padding: 1rem;">

    <div class="profile-header">
      <div class="profile-avatar">
        <ion-icon name="person-circle-outline" size="large"></ion-icon>
      </div>
      <h2>{{ userProfile.name || 'Usuario' }}</h2>
      <p>{{ userProfile.email }}</p>
    </div>

    <div class="profile-info">
      <h3>Información Personal</h3>

      <ion-item lines="none" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 2px 8px rgba(139, 69, 19, 0.08);">
        <ion-label position="stacked">Nombre</ion-label>
        <ion-input [(ngModel)]="userProfile.name" placeholder="Tu nombre"></ion-input>
      </ion-item>

      <ion-item lines="none" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 2px 8px rgba(139, 69, 19, 0.08);">
        <ion-label position="stacked">Apellido</ion-label>
        <ion-input [(ngModel)]="userProfile.apellido" placeholder="Tu apellido"></ion-input>
      </ion-item>

      <ion-item lines="none" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 2px 8px rgba(139, 69, 19, 0.08);">
        <ion-label position="stacked">Correo electrónico</ion-label>
        <ion-input [(ngModel)]="userProfile.email" type="email" placeholder="tu@email.com"></ion-input>
      </ion-item>

      <ion-item lines="none" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 2px 8px rgba(139, 69, 19, 0.08);">
        <ion-label position="stacked">Teléfono</ion-label>
        <ion-input [(ngModel)]="userProfile.phone" type="tel" placeholder="Tu teléfono"></ion-input>
      </ion-item>
    </div>

    <div class="profile-actions">
      <ion-button
        expand="block"
        fill="solid"
        (click)="saveProfile()"
        [disabled]="isSaving">
        <ion-icon name="checkmark" slot="start" *ngIf="!isSaving"></ion-icon>
        <ion-spinner name="crescent" *ngIf="isSaving"></ion-spinner>
        <span *ngIf="!isSaving">Guardar Cambios</span>
        <span *ngIf="isSaving">Guardando...</span>
      </ion-button>

      <ion-button
        expand="block"
        fill="outline"
        color="danger"
        (click)="resetProfile()"
        style="margin-top: 1rem;">
        <ion-icon name="refresh" slot="start"></ion-icon>
        Restablecer
      </ion-button>
    </div>

  </div>
</ion-content>