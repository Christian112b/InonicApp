<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Inicio
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

   <!-- Loading State -->
   <div class="loading-container" *ngIf="isLoadingProducts" style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; gap: 16px;">
     <ion-spinner name="crescent" style="color: #8B4513;"></ion-spinner>
     <p style="margin: 0; color: #8B4513; font-weight: 500;">Cargando productos...</p>
   </div>

   <!-- Error State -->
   <div class="error-container" *ngIf="!isLoadingProducts && hasError" style="text-align: center; padding: 60px 20px; color: #666;">
     <div style="font-size: 64px; color: #ff6b6b; margin-bottom: 16px;">⚠️</div>
     <h3 style="margin: 0 0 8px 0; color: #333; font-size: 20px;">Error al cargar productos</h3>
     <p style="margin: 0 0 16px 0; font-size: 14px;">{{ errorMessage }}</p>
     <ion-button fill="solid" (click)="retryLoadProducts()" style="--border-radius: 10px; height: 44px;">
       <ion-icon name="refresh" slot="start"></ion-icon>
       Reintentar
     </ion-button>
   </div>

   <!-- Content (only show when loaded and no error) -->
   <div *ngIf="!isLoadingProducts && !hasError" style="margin-top: 11%;">

   <!-- Promotional Slider -->
   <div class="promo-slider">
    <div class="slider-container">
      <div class="slide active" [style.background-image]="getSlideBackground(0)" [style.background-size]="'cover'" [style.background-position]="'center'">
        <div class="slide-overlay" style="background: linear-gradient(135deg, rgba(139, 69, 19, 0.7), rgba(160, 82, 45, 0.8));"></div>
        <div class="slide-content">
          <h2>¡2x1 en Cafés!</h2>
          <p>Todos los días de la semana</p>
        </div>
      </div>

      <div class="slide" [style.background-image]="getSlideBackground(1)" [style.background-size]="'cover'" [style.background-position]="'center'">
        <div class="slide-overlay" style="background: linear-gradient(135deg, rgba(205, 133, 63, 0.7), rgba(222, 184, 135, 0.8));"></div>
        <div class="slide-content">
          <h2>Postres Artesanales</h2>
          <p>50% de descuento en tartas</p>
        </div>
      </div>

      <div class="slide" [style.background-image]="getSlideBackground(2)" [style.background-size]="'cover'" [style.background-position]="'center'">
        <div class="slide-overlay" style="background: linear-gradient(135deg, rgba(101, 67, 33, 0.7), rgba(139, 69, 19, 0.8));"></div>
        <div class="slide-content">
          <h2>Membresía Premium</h2>
          <p>Acumula puntos y ahorra</p>
        </div>
      </div>

      <div class="slider-dots">
        <span class="dot active" data-slide="0"></span>
        <span class="dot" data-slide="1"></span>
        <span class="dot" data-slide="2"></span>
      </div>
    </div>
  </div>

  <!-- Favoritos Section -->
  <div class="favoritos-section">
    <div class="container">
      <h2 class="section-title">Los Favoritos y Consentidos</h2>
      <p class="section-description">Contamos con una gran variedad de ricos dulces y chocolates que encantan a chicos y grandes desde hace más de 92 años</p>

      <div class="favoritos-grid">
        <div class="product-card" *ngFor="let product of favoriteProducts">
          <div class="product-image">
            <img *ngIf="getImageSrc(product)" [src]="getImageSrc(product)" alt="{{ product.nombre }}" (error)="onImageError($event)">
            <div class="product-placeholder" *ngIf="!getImageSrc(product)">
              <ion-icon [name]="getProductIcon(product.nombre)"></ion-icon>
            </div>
            <div class="product-overlay">
              <button class="btn-icon add-to-cart" (click)="addToCart(product)">
                <ion-icon name="cart"></ion-icon>
              </button>
            </div>
          </div>
          <div class="product-info">
            <h3>{{ product.nombre }}</h3>
            <p>{{ product.descripcion }}</p>
            <div class="product-price">${{ product.precio_unitario.toFixed(2) }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  </div> <!-- End of content wrapper -->

</ion-content>